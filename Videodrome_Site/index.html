<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- libs and jquery See-Thru -->
    <script type="text/javascript" src="libs/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="libs/seeThru.min.js"></script>
    <script type="text/javascript" src="libs/p5.min.js"></script>
    <script src="libs/p5.dom.js"></script>
    <script type="text/javascript" src="libs/jquery.jplayer.min.js"></script>
    <script type="text/javascript" src="libs/VideoFrame.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<script type="text/javascript">
    // jQuery load
    var video;

    $(document).ready(function () {
        var $alphaOverlay = $('#alphaOverlay');
        $alphaOverlay.ready(function () {
            video = VideoFrame({
                id: "alphaOverlay",
                frameRate: FrameRates.film,
                callback: function() {
                    alert("callback");
                    var frame = this.get();
                    $("#current").text(frame);
                    $("#sketch").contents().find("#time").text(frame);
                }
            });
            $('#alphaOverlay').seeThru();
        });


        // Reaches into the P5js iframe and loads the newest time data

    });

    function updateFrame() {
        var frame = video.get();
        $("#current").text(frame);
        $("#sketch").contents().find("#time").text(frame);
        return frame;
    }
</script>
<div id="container">
    <!-- The alpha-d out video -->
    <!---->
    <div id="overlayDiv">
        <video id="alphaOverlay" controls autoplay>
            <source src="video/Composite_WithAlpha.webm" type="video/webm">
            <source src="video/Composite_WithAlpha.mp4" type="video/mp4">
        </video>
    </div>
    <!-- The processing sketch, rendered to canvas via ProcessingJS  -->
    <div id="processingDiv">
        <iframe id="sketch" src="Processing/P5js/tracker.html">

        </iframe>
    </div>
    <!-- The background video  -->
    <div id="bgDiv">
        <img src="video/BG.png" id="bgImg"/>
    </div>
    <div id="footer">
        <div id="current">0:00</div>
        <div id="duration">0:00</div>
    </div>
</div>
<!-- End container -->
</body>
</html>